\section{Introduction}
Population dynamics emerges from behavior of the animals; yet many models of population dynamics and ecosystems ignore behavior.  In the past 50 years, game theory has evolved into an invaluable tool for for including animal behavior in ecological models. Game theory gives a theoretical toolkit for understanding observed behavior and making predictions for how behavior will change in response to external changes. Game theory has been used to model a wide variety of situations where an animal needs to make a choice, from habitat choice \citep{krivan1997dynamic, kondoh2003foraging,kvrivan2008ideal}, mating behavior  \citep{rapoport1967exploiter}, and confrontation strategies \citep{smith1973logic}. The game theoretical models have proven successful, with empirical evidence backing up their validity as a model of animal behavior \citep{cooper1989communication,empirical_trait,behavioral_effects}.


%Game theory in biology emerged to model individual behavior, but individual behavioral changes compounds into large effects at the population scale. To incorporate behavior in population models
Behavior is fundamentally an individual phenomenon, and it is not obvious how to incorporate behavior in models of population dynamics with large numbers of interacting individuals. A reasonable assumption for interacting populations in an inhomogenous habitat, is that all animals seek to find the best spot simultaneously. For a single population this leads to the ideal free distribution \citep{fretwell1969territorial}. The population dynamics of a model where every individual is always at the best location is a population game \citep{kvrivan2009evolutionary}. The instantaneous population growth rates in a population game are determined by the instantaneous Nash equilibria of the individual habitat-choice game. Population games have emerged as a powerful tool to incorporate behavior in simple population models \citep{Krivan1998,genkai2007macrophyte, cressman2010ideal,pinti2021co, gonzalez2003dynamic}. However, the approach used in these models is not scalable to larger number of species or continuous habitats.


Population games are often simplified by only considering  one or two trophic levels, \citep{kvrivan2007lotka, sadowski2019predator}. This is in spite of e.g. mating behavior being influenced by the risk of predation, \citep{carranza1999red,lima2009predators}, naturally leading to a game with at least three types of players. Going to games with larger number of players can explain complex phenomena, which cannot be modeled with only two types \citep{pinti2019trophic}. Another simplification concerns the representation of space in habitat selection games.  Natural habitats often have continuous fitness gradients \citep{kawecki2004conceptual}, yet population games typically simplify this complex reality to a small finite number of patches, \cite{valdovinos2010consequences}. Population models in continuous space with multiple trophic levels or roles are generally hard to examine, as finding Nash equilibria in the resulting games is often prohibitively hard, \citep{empirical_trait,pinti2019trophic}. Resolving the issues of computing Nash equilibria quickly in a continuous setting allows the extension of population games to more realistic models. The question of whether to include behavior in a model or not becomes a question of relevance to the model rather than feasibility.


A critique of game-theoretical models is the assumption that players have perfect information and act in a perfectly rational manner, \citep{jones1999bounded}. Perfect information seems unreasonable, as animals do not have perfect state information \citep{simon1955behavioral}. In addition the minor gain in fitness from the almost-perfect choice to the perfect choice is often outweighed by the higher cognitive or sensorial cost of finding the perfect strategy \citep{simon1956rational, cohen2019bounded}. Though these concerns are well-founded, most models end up incorporating perfect rationality and information anyway. Classical satisficing models of bounded rationality cannot be verified empirically \citep{nonacs1993satisficing}, and with other attempts the \citep{bayesianmodel, thuijsman1995automata} the complexity has prevented the models from being implemented at the population level.


We introduce a method that allows the incorporation of behavior and imperfect decision making in population games in continuous space and time. The approach we introduce can readily be applied to study multi-species population dynamics emerging from a habitat-choice game in both continuous and discrete habitats. To illustrate the potential of the framework, we apply the method to diel vertical migration in the ocean. At dawn, billions of small fish and zoo-plankton migrate from the upper layers of the ocean to the deeper, darker layers, which can be directly measured as the deep scattering layer, \citep{sutton2013vertical, wang2014seasonal}. At dusk, the small fish and zoo-plankton migrate upwards. Here, we study the seasonal interplay between population dynamics and behavior. The model is an extension of the model studied in \citep{verticalmigration} to a population game. Our basic approach is to rephrase a continuous habitat selection game as a single linear complementarity problem, \citep{miller1991copositive}. We incorporate bounded rationality by requiring the strategies solve a diffusion equation, picking the strategy that maximizes the payoff with a given level of noise.
We couple the time scales of population dynamics and behavioral time scales, which allows us to examine how the vertical distribution of predators and prey change throughout the seasons and how this influences the population dynamics. We investigate the length and magnitude of the feeding rates of predators and consumers at throughout the day in spring, summer, and autumn of a single year. We examine how the optimal behavior with noise differs from that without noise, and how noise changes the population dynamics.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
